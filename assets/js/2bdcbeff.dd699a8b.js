"use strict";(self.webpackChunkdata_and_analytics=self.webpackChunkdata_and_analytics||[]).push([[8247],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>u});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=d(a),h=o,u=p["".concat(s,".").concat(h)]||p[h]||m[h]||r;return a?n.createElement(u,i(i({ref:t},c),{},{components:a})):n.createElement(u,i({ref:t},c))}));function u(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:o,i[1]=l;for(var d=2;d<r;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},34978:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var n=a(87462),o=(a(67294),a(3905));const r={sidebar_position:999,title:"4.2 | Building the data model",slug:"/4.2",tags:[]},i="4.2 | Building the data model",l={unversionedId:"book/chapter4/04-02-data-model",id:"book/chapter4/04-02-data-model",title:"4.2 | Building the data model",description:"Building the data model means connecting the prepared dimension and fact tables via table relationships. As described in chapter VERWEIS, the most common data model schema by far in practice is the star schema model. And as such we will structure our model.",source:"@site/docs/01-book/01-chapter4/04-02-data-model.md",sourceDirName:"01-book/01-chapter4",slug:"/4.2",permalink:"/4.2",draft:!1,tags:[],version:"current",sidebarPosition:999,frontMatter:{sidebar_position:999,title:"4.2 | Building the data model",slug:"/4.2",tags:[]},sidebar:"tutorialSidebar",previous:{title:"4.1 | Chapter overview",permalink:"/4.1"},next:{title:"4.3 | Data model properties",permalink:"/4.3"}},s={},d=[],c={toc:d};function p(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"42--building-the-data-model"},"4.2 | Building the data model"),(0,o.kt)("p",null,"Building the data model means connecting the prepared dimension and fact tables via table relationships. As described in chapter VERWEIS, the most common data model schema by far in practice is the star schema model. And as such we will structure our model."),(0,o.kt)("p",null,"To get started, navigate to the ",(0,o.kt)("em",{parentName:"p"},"Model view")," in Power BI via the navigation on the left border of the window:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"03-58",src:a(13856).Z,width:"1321",height:"877"})),(0,o.kt)("p",null,"Depending on your screensize, zoom out or in to see all the tables we loaded to Power BI. In the screenshot above, I have further hidden the ",(0,o.kt)("em",{parentName:"p"},"Properties")," pane to have more space."),(0,o.kt)("p",null,"Each box on the canvas represents a table with its fields listed within. If you have not changed the default settings of Power BI, there will likely already be some table relationships which Power BI created automatically based on matching column names. Please note, the automated creation of table relationships is a feature that can be deactivated in the options of Power BI."),(0,o.kt)("p",null,"You can drag-and-drop the tables and arrange them on the canvas. I would suggest the following arrangement where dimension tables are on top and the fact tables just below:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"03-59",src:a(99357).Z,width:"1320",height:"867"})),(0,o.kt)("p",null,"Then, we will create the missing table relationships. Doing so is very simple: Drag-and-drop a field from one table to the matching field on the other table with your mouse."),(0,o.kt)("p",null,"Let's start with connecting dimDate with ",(0,o.kt)("em",{parentName:"p"},"factSales"),". Drag-and-drop the field ",(0,o.kt)("em",{parentName:"p"},"Date")," from ",(0,o.kt)("em",{parentName:"p"},"dimDate")," to ",(0,o.kt)("em",{parentName:"p"},"Date")," in ",(0,o.kt)("em",{parentName:"p"},"factSales"),'. A line should be created with a "1" at the end of dimDate and a "',(0,o.kt)("em",{parentName:"p"},'" at the end of '),'factSales*. Remember, each entity in a dimension table (here: dates) is unique (hence "1") while it can occur many times in the fact table.'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"03-60",src:a(76939).Z,width:"1314",height:"806"})),(0,o.kt)("p",null,"Now that you know how to create a table relationship, we can establish the rest of the missing ones:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("em",{parentName:"li"},"dimDate"),": Connect with ",(0,o.kt)("em",{parentName:"li"},"factForecast")," via ",(0,o.kt)("em",{parentName:"li"},"Date")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("em",{parentName:"li"},"dimCustomer"),": Connect with ",(0,o.kt)("em",{parentName:"li"},"factSales")," via ",(0,o.kt)("em",{parentName:"li"},"Customer ID"))),(0,o.kt)("p",null,"Finally, your data model should look like the following:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"03-61",src:a(81107).Z,width:"1323",height:"866"})),(0,o.kt)("p",null,"Let's take a minute to understand why we are connecting the dimension and fact tables. Remember, ",(0,o.kt)("strong",{parentName:"p"},"we need the dimension tables to filter, slice and aggregate the fact data"),'. In order for that to work, Power BI needs to "know" that there is a relationship between these tables and for example ',(0,o.kt)("em",{parentName:"p"},"dimCustomer")," is there to filter ",(0,o.kt)("em",{parentName:"p"},"factSales")," by the customer master data (like customer name, region or country). Each table relationship in Power BI has two important properties: cardinality and filter direction."),(0,o.kt)("p",null,"To configure the ",(0,o.kt)("strong",{parentName:"p"},"table relationship properties"),", either do a double-click on an existing connection line or a right-click and select ",(0,o.kt)("em",{parentName:"p"},"Properties"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"03-62",src:a(18775).Z,width:"1300",height:"660"})),(0,o.kt)("p",null,'In this configuration window we can edit the matching table fields of both tables, the cardinality (here "Many to one (*:1)"), the cross filter direction and whether the relationship should be active or not. Please note, in almost all cases, the filter direction will be the dimension table filtering the fact table (and you should avoid other configurations).'),(0,o.kt)("admonition",{type:"warning"},(0,o.kt)("p",{parentName:"admonition"},'Avoid cross-filtering configurations with the direction setting on "Both" as this will very likely lead to unexpected and confusing results in the visualizations and dashboards.')),(0,o.kt)("p",null,"Now that we have built and understood the table relationships, let's look at some of the data model properties in the next chapter."))}p.isMDXComponent=!0},13856:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/img_book_03-58-141ac54e34547050e367f8c9a70ff56c.png"},99357:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/img_book_03-59-1d745280d5210fe0e24800c9056134fb.png"},76939:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/img_book_03-60-6d44d8c443c029100992b673f81e79f7.png"},81107:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/img_book_03-61-01bca10e386e903d4bd53958dff6bb90.png"},18775:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/img_book_03-62-b3424b7fc0d531917e73570d68117715.png"}}]);